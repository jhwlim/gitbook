---
description: 이펙티브 코틀린 정리하기
---

# knowledge를 반복하여 사용하지 말라

> 프로젝트에서 이미 있던 코드를 복사해서 붙여넣고 있다면, 무언가가 잘못된 것이다.

## knowledge

- knowledge는 넓은 의미로 '**의도적인 정보**'를 뜻하며, 코드 또는 데이터로 표현할 수 있다.

- 프로젝트를 진행할 때 정의한 모든 것이 knowledge 이다. 알고리즘의 작동 방식, UI의 형태, 우리가 원하는 결과 등이 모두 '의도적인 정보'이며, knowledge이다. knowledge는 코드, 설정, 템플릿 등으로 표현할 수 있다. 이러한 knowledge는 어떤 도구, 가상머신, 다른 프로그램들에서 직접 또는 간접적으로 이해할 수 있는 정보라고 할 수 있다.

프로그램에서 중요한 knowledge는 크게 (1) **로직**과 (2) **공통 알고리즘** 이다. 둘의 가장 큰 차이점은 시간에 따른 변화이다. 비즈니스 로직은 시간이 지나면서 계속해서 변하지만, 공통 알고리즘은 한 번 정의된 이후에는 크게 변하지 않는다.

## 모든 것은 변화한다

UI 디자인과 기술 표준 등은 훨씬 빠르게 변화한다. 또한 고객에 대한 이해도 매일매일 변화한다. 이처럼 우리 프로젝트의 knowledge도 계속해서 아래와 같은 이유로 변화한다.

- 회사가 사용자의 요구 또는 습관을 더 많이 알게 되었다.
- 디자인 표준이 변화했다.
- 플랫폼, 라이브러리, 도구 등이 변화해서 이에 대응해야 한다.

모든 것은 변화하고, 우리는 이에 대비해야 한다. **변화할 때 가장 큰 적은 knowledge가 반복되어 있는 부분이다.** knowledge 반복은 프로젝트의 확장성을 막고, 쉽게 깨지게 만든다.

여러 종류의 추상화를 표현할 수 있는 수많은 솔루션이 있으며, 이를 활용하면 반복을 줄일 수 있다.

## 언제 코드를 반복해도 될까?

**얼핏보면 knowledge 반복처럼 보이지만, 실질적으로 다른 knowledge를 나타내면 추출하면 안되는 부분이다.**

신중하지 못한 추출은 변경을 더 어렵게 만든다. 또한 구성을 읽을 때도 더 어려울 수 있다.

**두 코드가 같은 knowledge를 나타내는지, 다른 knowledge를 나타내는지는 "함께 변경될 가능성이 높은가? 따로 변경될 가능성이 높은가?" 라는 질문으로 어느 정도 결정할 수 있다.** 코드를 추출하는 이유는 변경을 쉽게 만들기 위함이므로, 이 질문은 가장 근본적인 질문이라고 할 수 있다.

한 가지 유용한 휴리스틱으로, 비즈니스 규칙이 다른 곳(source)에서 왔는지 확인하는 방법이 있다. 다른 곳에서 왔다면, 독립적으로 변경될 가능성이 높다.

## 단일 책임 원칙

**단일 책임 원칙**이란 '클래스를 변경하는 이유는 단 한가지여야 한다.'라는 의미이다.

⌜클린 아키텍처⌟라는 책에서는 '두 액터(actor)가 같은 클래스를 변경하는 일은 없어야 한다.'라고 표현했는데, 여기서 액터는 변화를 만들어내는 존재를 의미한다. 액터는 서로의 업무와 분야에 대해서 잘 모르는 개발자들로 비유된다. 이러한 개발자들이 같은 코드를 변경하는 것은 굉장히 위험한 일이다.

이러한 문제를 방지하려면 처음부터 책임에 따라서 다른 클래스로 구분해서 만들어야 한다.

단일 책임 원칙은 우리에게 두 가지 사실을 알려준다.

- 서로 다른 곳에서 사용하는 knowledge는 독립적으로 변경할 가능성이 많다. 따라서 비슷한 처리를 하더라도, 완전히 다른 knowledge로 취급하는 것이 좋다.
- 다른 knowledge는 분리해 두는 것이 좋다. 그렇지 않으면, 재사용해서는 안 되는 부분을 재사용하려는 유혹이 발생할 수 있다.

## 정리

모든 것은 변화한다. 따라서 공통 knowledge가 있다면, 이를 추출해서 이러한 변화에 대비해야 한다.

여러 요소에 비슷한 부분이 있는 경우, 변경이 필요할 때 실수가 발생할 수 있다. 이런 부분은 추출하는 것이 좋다. 추가적으로 의도하지 않은 수정을 피하려면 또는 다른 곳에서 조작하는 부분이 있다면 분리해서 사용하는 것이 좋다.

많은 개발자는 비슷해 보이는 코드는 모두 추출하려는 경향이 있다. 극단적인 것은 언제나 좋지 않다. 항상 균형이 중요하다.