---
description: Real MySQL 8.0
---

# 1. 트랜잭션

## 1. MySQL에서의 트랜잭션

트랜잭션은 하나의 논리적인 작업 셋에 하나의 쿼리가 있든 2개 이상의 쿼리가 있든 관계없이 논리적인 작업 셋 자체가 100% 적용되거나 아무것도 적용되지 않아야 함을 보장해 주는 것이다.

MyISAM, MEMORY에서는 여러 개의 INSERT 문을 실행하는 과정에서 중간에 오류가 발생하더라도, 이미 실행된 INSERT 문은 그대로 두고 쿼리 실행을 종료한다. 이러한 현상을 **부분 업데이트**라고 하며, 테이블 데이터의 정합성을 맞추는 데 상당히 어려운 문제를 만들어 낸다. 부분 업데이트 현상이 발생하면 실패한 쿼리로 인해 남은 레코드를 다시 삭제하는 재처리 작업이 필요할 수 있다.

InnoDB는 쿼리 중 일부라도 오류가 발생하면 전체를 원 상태로 만든다는 트랜잭션의 원칙대로 INSERT 문장을 실행하기 전 상태로 그대로 복구한다. 

## 2. 주의사항

트랜잭션 또한 DBMS의 커넥션과 동일하게 꼭 필요한 최소의 코드에만 적용하는 것이 좋다.

프로그램의 코드가 데이터베이스 커넥션을 가지고 있는 범위와 트랜잭션이 활성화돼 있는 프로그램의 범위를 최소화해야 한다. 또한 프로그램의 코드에서 라인 수는 한두줄이라고 하더라도 네트워크 작업이 있는 경우에는 반드시 트랜잭션에서 배제해야 한다. 이런 실수로 인해 DBMS 서버가 높은 부하 상태로 빠지거나 위험한 상태로 빠지는 경우가 빈번히 발생한다.