---
description: 컨테이너 인프라 환경 구축을 위한 쿠버네티스/도커
---

# 4.1 도커를 알아야 하는 이유

쿠버네티스를 이루는 기본 오브젝트가 파드고, 파드는 컨테이너로 이루어져 있으며, 컨테이너를 만들고 관리하는 도구가 도커이기 때문이다.

최근에는 도커를 몰라도 쿠버네티스를 배우고 사용하는 것이 가능해졌지만, 쿠버네티스를 이루고 있는 기술 자체는 컨테이너를 벗어날 수 없다. 따라서 트러블 슈팅을 제대로 하려면 컨테이너를 잘 알아야 한다. 그리고 상황에 따라서는 직접 만든 소스 코드를 빌드해 컨테이너로 만들고 이를 쿠버네티스에서 사용할 수도 있다. 따라서 **컨테이너와 이를 다루는 도커를 자세히 알면 컨테이너 인프라 환경을 한층 더 이해할 수 있다.**

## 1. 파드, 컨테이너, 도커, 쿠버네티스의 관계

**파드들은 워커 노드라는 노드 단위로 관리하며, 워커 노드와 마스터 노드가 모여 쿠버네티스 클러스터가 된다. 그리고 파드는 1개 이상의 컨테이너로 이루어져 있다.**

파드는 쿠버네티스로부터 IP를 받아 컨테이너가 외부와 통신할 수 있는 경로를 제공한다. 그리고 컨테이너들이 정상적으로 작동하는지 확인하고 네트워크나 저장 공간을 서로 공유하게 한다. 파드는 이러한 환경을 만들기 때문에 컨테이너들은 마치 하나의 호스트에 존재하는 것처럼 작동할 수 있다.

- 컨테이너 : 하나의 운영체제 안에서 커널을 공유하며 **개별적인 실행 환경**을 제공하는 격리된 공간
- 개별적인 실행 환경
  - CPU, 네트워크, 메모리와 같은 시스템 자원을 독자적으로 사용하도록 할당된 환경

각 컨테이너 내부에서 실행되는 애플리케이션들은 서로 영향을 미치지 않고 **독립적**으로 작동할 수 있다.

도커는 컨테이너를 사용하는 방법을 명령어로 정리한 것으로 볼 수 있는데, 도커를 사용하면 사용자가 따로 신경쓰지 않아도 컨테이너를 생성할 때 개별적인 실행 환경을 분리하고 자원을 할당한다.

## 2. 다양한 컨테이너 관리 도구

### 컨테이너디 (Containerd)

- Docker사에서 컨테이너 런타임 부분을 분리하여 만든 오픈 소스 컨테이너 관리 도구
- 쿠버네티스와의 통신에 필요한 CRI(Container Runtime Interface) 규격에 맞춰 구현한 플러그인을 사용해 쿠버네티스와 통합할 수 있다.
- **다른 시스템과 통합해 컨테이너를 관리하는 기능을 제공하기 때문에 컨테이너 관리도구를 직접 개발하려는 개발자에게 적합하다.**

### 크라이오 (CRI-O)

- 오픈 소스 프로젝트로 인큐베이팅 단계
- 범용적인 컨테이너 관리 도구인 도커나 컨테이너디와 달리 **쿠버네티스와 통합하는 것을 주목적으로 한다.**
- 다른 도구보다 가볍고 단순하며, CRI 규격을 자체적으로 구현하고 있어서 **별도의 구성 요소나 플러그인 없이 쿠버네티스와 통합할 수 있다.**

### 카타 컨테이너 (Kata Containers)

- 오픈 소스 컨테이너 관리 도구
- 컨테이너마다 독립적인 커널을 제공한다는 점에서 기존 컨테이너 방식과 큰 차이가 있다.
- 개별 컨테이너를 위한 가벼운 가상 머신을 생성하고 그 위에서 컨테이너가 작동한다. 따라서 모든 컨테이너는 **독립적인 커널을 사용**하므로 다른 컨테이너의 영향을 받지 않는다.
- 기술적으로 기존 컨테이너 방식과 가상화 방식의 중간 영역에 있다. **가상 머신을 통해 컨테이너를 격리하므로 기술적으로는 보안에 좀 더 강하지만, 필요한 CPU나 메모리의 크기가 기존 컨테이너 방식보다 크다.**

### 도커 (Docker)

- Docker사에서 2013년에 만든 컨테이너 관리 도구
- **컨테이너 관리 기능 외에도 컨테이너를 실행하는 데 필요한 이미지를 만들거나 공유하는 등의 다양한 기능을 제공한다.**
- 사용자가 명령어를 입력하는 명령어 도구(CLI)와 명령을 받아들이는 도커 데몬으로 구성돼 있다.
- 도커 1.11 이후부터는 컨테이너를 제어하기 위해 별도의 컨테이너디를 포함하고 있다.
- 도커와 쿠버네티스를 함께 설치할 경우 쿠버네티스는 컨테이너 오케스트레이션을 위해 도커에 포함된 컨테이너디를 활용한다.
- 네트워크를 통한 호출로 작동하므로 구조적으로는 다소 복잡한 편이나 이를 모두 도커에서 관리하기 떄문에 사용자 입장에서는 신경쓰지 않아도 된다.
